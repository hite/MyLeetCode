<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <script type="text/javascript">
        // https://leetcode-cn.com/problems/er-cha-shu-de-jing-xiang-lcof/

        /**
     * Definition for singly-linked list.
    
     */
        function TreeNode(val) {
            this.val = val;
            this.left = null;
            this.right = null;
        }

        /**
     * @param {TreeNode} root
     * @return {TreeNode}
     */
        var mirrorTree = function (root) {
            // 用 dfs 解题，记住返回根节点、最后的结果；
            if (!root) return null;

            var tmp = root.left;
            root.left = mirrorTree(root.right);
            root.right = mirrorTree(tmp);
            return root;
        };

        // 用循环解题；
        var mirrorTree = function (root) {
            if (!root) return null;

            var queue = [root];
            while (queue.length > 0) {
                var node = queue.pop();

                // if ((isVisited(node.left, visited) || isLeafNode(node.left)) && (isLeafNode(node.right) || isVisited(node.right, visited))) {
                //     // 遍历到叶子来，开始交换: ///错误的假设
                //     // 替换来当前的节点，交换子节点，接下来去处理子节点；最重要的特性树，交换子节点不影响，子节点作为 root 节点的交换
                //     swapNode(node);
                //     visited.push(node);
                // } else {
                //     if (node.left) {
                //         queue.push(node.left);
                //     }
                //     if (node.right) {
                //         queue.push(node.right);
                //     }
                // }
                swapNode(node);
                if (node.left) {
                    queue.push(node.left);
                }
                if (node.right) {
                    queue.push(node.right);
                }
            }

            return root;
        }

        var isVisited = function (node, visited) {
            for (let i = 0; i < visited.length; i++) {
                const e = visited[i];
                if (node.val == e.val) return true;
            }

            return false;
        }

        var isLeafNode = function (node) {
            if (node == null) return true;

            return !node.left && !node.right
        }
        var swapNode = function (node) {
            var tmp = node.left;
            node.left = node.right;
            node.right = tmp;
        }

        // var a = new TreeNode(1);
        // var a1 = new TreeNode(2);
        // var a2 = new TreeNode(3);
        // var a3 = new TreeNode(4);

        // a.left = a1;
        // a.right = a2;
        // a1.left = a3;

        // 树的子树用例
        // 例如输入：

        //     4
        //         /   \
        //     2     7
        //         / \   / \
        //     1   3 6   9
        //     镜像输出：

        //     4
        //         /   \
        //     7     2
        //         / \   / \
        //     9   6 3   1

        //     来源：力扣（LeetCode）
        //     链接：https://leetcode-cn.com/problems/er-cha-shu-de-jing-xiang-lcof
        //     著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。
        // var t = new TreeNode(3);
        var a1 = new TreeNode(1);
        var a2 = new TreeNode(2);
        var a3 = new TreeNode(3);
        var a4 = new TreeNode(4);
        var a5 = new TreeNode(5)
        var a6 = new TreeNode(6)
        var a7 = new TreeNode(7)
        var a8 = new TreeNode(8)
        var a9 = new TreeNode(9)

        a4.left = a2;
        a4.right = a7;
        a2.left = a1;
        a2.right = a3;

        a7.left = a6; a7.right = a9;

        var root = new TreeNode(1);
        root.left = new TreeNode(2);

    </script>
</body>

</html>